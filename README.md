# :cat: :dog: 펫박스 데이터 분석  

고양이와 강아지 용품을 파는 사이트에 주문 데이터를 사용한 데이터 분석입니다.  

주문 데이터를 분석하여 특징을 파악하고, 연관분석을 통해 어떠한 상품들을 연관 지어서 구매하는지에 대해 분석해 보았습니다.  

## ❓ 연관 분석이란?

- 데이터에 숨겨진 항목간의 연관규칙을 찾아내는 분석 방법으로 흔히 **장바구니 분석(market basket analysis)** 이라고도 합니다.
- 연관분석은 실제로 월마트, 아마존 등 여러기업에서 마케팅에 많이 활용을 하고 있습니다.  

## :wrench: 분석 도구

- R프로그래밍

## :hammer: 주 사용 패키지  

- ggplot2 : 시각화를 위해 사용한 패키지입니다. 
- stringi, stringr : 데이터 전처리를 위해 사용한 패키지입니다.  
- arules: 연관분석에 사용되는 패키지입니다.

## :computer: 분석 결과  

### 카테고리 분석 & 시간대별 분석

#### 1-1 대분류[댕댕이와 냥냥이] 구매량 
![image](https://user-images.githubusercontent.com/55734436/104839618-95ed5680-5905-11eb-9be4-e7d37caa4303.png)

> 대분류에서 댕댕이와 냥냥이의 구매량이 상대적으로 많은 관계로 따로 분류를 해서 그래프를 그렸습니다. 댕댕이>냥냥이 순으로 댕댕이가 냥냥이보다 약 3배 정도 더 많은 구매량을 나타내는 것을 알 수 있습니다.

#### 1-2 대분류[그외] 구매량
![image](https://user-images.githubusercontent.com/55734436/104839649-bfa67d80-5905-11eb-9d75-c27fe5b474f3.png)

> 댕댕이와 냥냥이를 제외한 다른 분류에 구매량을 비교해 보았을 때, 사은품>일반상품>소셜상품>박스>애견 등의 순으로 구매량이 많은 것을 알 수 있습니다.

#### 2-2 시간대별 구매량
![image](https://user-images.githubusercontent.com/55734436/106440006-ae3fa280-64bb-11eb-888a-85ce814da386.png)

> 시간대별로 구매량을 분석해 봤을 때 오전이나 밤에 주문을 많이 하는 것으로 나타났고, 새벽에 주문이 저조한 것으로 나타났습니다.

### 상품들간의 연관분석  

#### 1. 연관분석 규칙생성 결과
소비자들이 상품을 구매할 때 어떠한 상품들을 같이 묶어서 구매하는지에 대한 패턴을 알아보기 위해 apriori 함수를 사용하여 상품들 간의 연관분석을 진행하였습니다. 
(support 값을 지정 하지 않으면 규칙이 0개 생성 되므로 support 값을 따로 지정 해주어야 함.)

![image](https://user-images.githubusercontent.com/55734436/106440232-f363d480-64bb-11eb-94c4-2c1153498635.png)
![image](https://user-images.githubusercontent.com/55734436/106440248-f6f75b80-64bb-11eb-9e4c-a235c3695759.png)

< 규칙 생성 결과 총 100개의 규칙이 형성이 됨. 세부적으로 1개의 규칙이 2개의 아이템, 41개의 규칙이 3개의 아이템, 42개의 규칙이 4개의 아이템, 16개의 규칙이 5개의 아이템으로 구성되어 있었습니다. 이에 더해 (지지도, 신뢰도, 향상도)에 대한 기초통계량도 알 수 있습니다.

#### 2. 연관분석 시각화

![image](https://user-images.githubusercontent.com/55734436/106440332-14c4c080-64bc-11eb-8d2a-d9fc0a31de0a.png)
  
> 네트워크 그래프를 그려 보면 군집처럼 여러 개의 그룹이 형성된 것을 확인할 수 있습니다. 이는 서로 관계가 있음을 뜻함. 즉, 같은 그룹으로 묶여있는 상품들은 소비자가 같이 구매를 한 상품을 의미합니다.  

![image](https://user-images.githubusercontent.com/55734436/106440394-2a39ea80-64bc-11eb-99ae-a2838661c540.png)

> Method를 paracoord로 설정하면 상품들 간의 연간 관계를 병렬적으로 확인할 수 있습니다. 가로축은 규칙이 형성된 상품 수를 의미하고, 세로축은 상품번호를 의미합니다.  

#### 3. 연관분석 해석

**(그룹 1)**

![image](https://user-images.githubusercontent.com/55734436/106440503-48074f80-64bc-11eb-9f7b-838447577efd.png)  

|상품코드|상품명|
|:---:|:---:|
|113691-0101|뉴트리플랜 흰살참치와 멸치|
|113692-0101|뉴트리플랜 흰살참치와 치즈|
|113693-0101|뉴트리플랜 흰살참치와 닭가슴살|  

**(그룹 2)**

![image](https://user-images.githubusercontent.com/55734436/106440742-86047380-64bc-11eb-8227-abe5349b5098.png)

|상품코드|상품명|
|:---:|:---:|
|108507-0101|시저 쇠고기와 치즈캔|
|108509-0101|시저 쇠고기와 참치캔|
|108510-0101|시저 쇠고기캔|
|108511-0101|시저 불고기캔|


**(그룹 3)**

![image](https://user-images.githubusercontent.com/55734436/106440753-8997fa80-64bc-11eb-91c7-ec1d5933f1d4.png)

|상품코드|상품명|
|:---:|:---:|
|115231-0101|네츄럴코어 미트스틱 실꼬리돔 명태|
|115232-0101|네츄럴코어 미트스틱 실꼬리돔 닭가슴살|
|115233-0101|네츄럴코어 미트스틱 실꼬리돔 참치|
|115234-0101|네츄럴코어 미트스틱 닭가슴살 참치|

> 연관분석 결과 형성된 그룹들 간에 특징을 살펴보면 대부분의 그룹들이 제품은 동일하지만 종류(맛)을 다르게 구매하는 특징이 나타나는 것을 알 수 있습니다. 즉, 소비자들의 구매 패턴은 새로운 제품을 사는 것보다는 기존에 구매했던 상품들을 많이 구매합니다. 이는 강아지와 고양이의 특성과도 연관을 지을 수 있습니다.
